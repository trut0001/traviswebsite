<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Travis Rutledge">
<meta name="dcterms.date" content="2024-08-16">

<title>Assignment 1 - ETC 5523 – travisrutledge</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">travisrutledge</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/travisrutledge"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/travisrutledge/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Assignment 1 - ETC 5523</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">news</div>
                <div class="quarto-category">code</div>
                <div class="quarto-category">analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Travis Rutledge </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 16, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><strong>Article A - The Green Divide: How Wealth Buys Shade in a Warming World</strong></p>
<p>The article studied here is titled “The Green Divide: How Wealth Buys Shade in a Warming World” by Kate Newton, and it is available online from <a href="https://interactives.stuff.co.nz/2022/03/urban-heat-island-tree-cover/">Stuff.co.nz</a>. Stuff is a New Zealand news media website, whose parent company is a media conglomerate named Stuff Ltd.&nbsp;This is considered “print media” because Stuff sources their articles from Stuff Ltd newspapers, such as The Post and The Press.&nbsp;</p>
<p>The article summarises how tree shade is an important counter to global warming. The article provides visualisations showing how high-income neighbourhoods have more access to tree shade while low-income neighbourhoods have less access to tree shade.</p>
<p>The first six paragraphs are background information as to why tree shade is better at lowering temperatures than other shade. It does this through three methods. First, the author invites the reader to imagine a hot day and asks if they would prefer sitting under the shade of a building or a tree. Second, the author provides a quote from a professor on urban forestry, where he states his preference for the shade of a tree. Third, the author provides a graphic showing how trees provide better cooling than buildings because of their shade and evaporation of rainwater. This context is useful because it explains why tree shade is important and why it is a problem that tree shade is less available for poor communities.</p>
<p>The lede is located in the first sentence of the article and just below the graphic title, which is normal for printed media. It is bolded to catch the reader’s attention. This lede provides further meaning to the title, stating:</p>
<p>“The cooling shade of trees will be crucial to adapting to climate change. But data from New Zealand cities shows tree cover is uneven — and often dictated by wealth.”</p>
<p>The summary is found after the background information. It states:</p>
<p>“At a more fundamental level, wealth often corresponds to whether you live in a cool neighbourhood or a hot one. Shade and prosperity are linked together in the phrase ‘leafy suburbs,’ used as a byword for New Zealand’s well-heeled, established neighbourhoods.”</p>
<p>The article then provides more details, maps, and other visualisations to support the statement that shade is more available in rich communities. It is assumed that the reader either be from New Zealand, live in New Zealand, or have knowledge of the different cities and neighbourhoods of New Zealand.&nbsp;</p>
<p>The main result of the story is a call to action for local governments to be mindful of tree shade as they develop communities. The purpose of the article is to equip the public and decision-makers with information so that they can affect change for all communities, not just those that are affluent. The main result is located in is the last paragraph of the article:</p>
<p>“What tree canopy mapping can do, though, is show where trees are and aren’t — and how that is changing. “If [councils] know that there are neighbourhoods that only have four per cent canopy cover, they would hopefully see it as their responsibility to increase canopy cover in that area.”</p>
<p><strong>Article B - Wordle, 15 Million Tweets Later</strong></p>
<p>The article studied here is “Wordle, 15 Million Tweets Later”, available online at <a href="https://observablehq.com/@rlesser">observablehq.com</a><strong>.</strong> Observable is a company that provides data visualisation solutions for web apps. A portion of their website is a blog to showcase data visualisation work. This article was published by a public contributor named Robert Lesser.</p>
<p>The blog post analyses the behaviour of people who play Wordle and share their results on Twitter. Key findings were that there is some level of player success predictability based on the structure of the Wordle (ex: having double letters), and that players are less likely to share their results on Twitter if the word is more difficult. This is likely due to players performing poorly and not wanting to share their results.&nbsp;</p>
<p>The first two paragraphs provide background information on Wordle’s popularity. The article states that a reason Wordle became so popular is because players started sharing their Wordle results on Twitter. This background information is relevant because it provides context before the author shares his analysis.</p>
<p>The lede in this article is found in the title itself - “Wordle, 15 Million Tweets Later”. Although it is unusual to put the lede in the title, this is useful in an informal blog post because it grabs the reader’s attention. This title provides both context and scale to the reader. “15 Million” is a large number and shows the scale of this analysis, and the reader immediately understands that the context of the article is about Wordle. Because this analysis is exploratory, there is not a call to action or recommendation in the article or the lede. Instead, this lede describes the purpose behind the article - exploring a large number of tweets about Wordle.&nbsp;</p>
<p>The summary of the article can be found just after introduction, and it is a simple sentence:</p>
<p>“So, to really understand Wordle, I had to look at the tweets – all 15 million of them”.</p>
<p>This summary is similar to the lede in that it concisely states the purpose of this blog post - to share his analysis of 15 million tweets. The author is simply sharing some analyses that he found interesting.&nbsp;&nbsp;</p>
<p>The main result are the various visualisations and findings that the reader can explore. The author provides a final section named “Further Exploration”, which includes a link to an appendix with more visualisations. Another notable feature of this blog post is that the reader can click on each visualisation to view the raw code used to make the visualisations. The entire blog post is intended to be inspected, explored, and used by the reader for further analysis, if desired.&nbsp;</p>
<p><br>
</p>
<p><strong>Article C - How did Australia’s housing market get so bad, and is it all negative gearing’s fault?</strong></p>
<p>The article studied here is titled <strong>“</strong>How did Australia’s housing market get so bad, and is it all negative gearing’s fault?”by Guardian Australia, and it is available on <a href="https://www.youtube.com/watch?v=iqUFERBJwoY">The Guardian’s Youtube Channel</a>. Guardian Australia is the Australian website of the British online and print newspaper, The Guardian. This article is a five minute video that utilises journalistic storytelling and data visualisations. This video format is used to concisely and casually communicate to a large audience.&nbsp;</p>
<p>The video summarises two key contributors to the high prices of the Australia housing market - negative gearing and the capital gains tax. The video explores what these two terms are, their history in Australia policymaking, and how they contribute to making the Australian housing market so expensive.&nbsp;</p>
<p>The video opens with background information about the Australian housing market. The host shows a time series plot that compares house prices versus household disposable income from 1989 to 2022. Since 2000, the gap between disposable income and house prices has widened considerably.This means that as each year has passed, houses are less affordable for the average consumer. This context is helpful to the viewer so they know what problem is being discussed and why.&nbsp;</p>
<p>The lede of the video is in the title - “How did Australia’s housing market get so bad, and is it all negative gearing’s fault?” Putting the lede in the title is standard practice for YouTube videos - even from reputable news sources - as the thumbnail and video title are used to drive interest and summarise the video topic to the prospective viewer.&nbsp;&nbsp;</p>
<p>The video summarises their main point from 4:05 to 4:30. The main point is that both negative gearing and low capital gains tax rates have contributed to increased housing prices because they incentivise investors to continue investing in the housing market. The video states:</p>
<p>“Investors are now so heavily protected by the tax system that they are willing to take even bigger risks and spend even more money on the properties they are buying, which of course makes housing prices rise faster, which then makes the combination of negative gearing and capitals gains discounts even more profitable, which means investors are willing to spend even more, which makes house prices rise even faster, and would you look at that - it’s like we’re are almost in a vicious cycle.”&nbsp;</p>
<p>Other factors may contribute to higher prices in the housing market, but those are not discussed in the video. This is understandable for two reasons. First, this video is both concise and casual, so it is limiting the scope to two key topics. Second, it is focusing on answering the question “is it all negative gearing’s fault?” This is done by explaining what negative gearing is and then exploring the capital gains tax. The video does not assume that the viewer has previous knowledge about negative gearing or the capital gains tax.</p>
<p>The main result of this video is the audience’s better understanding of how Australia’s housing market got so expensive, and how negative gearing and capital gains tax incentives have significantly contributed to rising house prices. There is no explicit call to action for community building, advocacy, or policy change. Instead, Guardian Australia is providing information to their audience about a particular social issue and letting the audience decide what to do with that information.&nbsp;</p>
<p><strong>Comparing And Contrasting the Articles</strong></p>
<p>There are three similarities among the articles:</p>
<ol type="1">
<li><p><strong>Use of data visualisations.</strong> All of the articles use data visualisations to communicate their point. Well-designed data visualisations are helpful for audiences to understand, trust, and retain information. The Stuff article primarily uses heat maps while the Wordle blog post and Guardian video use time series plots.&nbsp;</p></li>
<li><p><strong>Use of an attention-grabbing hook statement.</strong> All of the articles try to catch the reader’s attention with either their title or lede. This is to be expected, as these articles are online and require the reader to click through and engage. The authors want the audience to make the decision to engage with the material based on a hook that is appealing to them.&nbsp;</p></li>
<li><p><strong>Use of colloquial language.</strong> All of the articles used a communication style that is non-academic and appeals to a large public audience. For example, the Stuff article has hand-drawn illustrations, the blog post is formatted as an approachable blog, and the video has an in-person host using gen-z vernacular like “cooked”.&nbsp;</p></li>
</ol>
<p>There are also formatting differences among the articles. Both the Stuff article and Wordle blog post use the inverted pyramid format, while the Guardian Australia video uses an hourglass format. The inverted pyramid format is effective in catching the reader’s attention with a main point, supporting that main point with more details, then ending with supplemental data. The Stuff article starts with the lede in the opening sentence, while Stuff provides the lede in the title. They then follow up with more details and supplemental data. The hourglass format provides the crucial details in the beginning, gives the narrative, and then ends by summarising the main point. The hourglass format is effective in ensuring that the audience comprehends and retains the full picture of what is being communicated. The Guardian video starts with the crucial information about the housing crisis, provides the narrative around negative gearing and capital gains tax, and then ends with the summarising point of how housing prices continue to rise.&nbsp;</p>
<p>Another difference is in the intent of the articles. The intent of the Stuff article is to educate the audience and provide a call to action in regards to global warming. Stuff suggests that local governments should be more mindful of tree shade when planning communities. On the other hand, the Wordle blog post and the Guardian video intend to be educational and do not have an explicit call to action to their audience.</p>
<p><br>
<br>
<br>
</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>